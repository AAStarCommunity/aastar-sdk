
> @aastar/sdk@0.16.8 test:coverage /Users/jason/Dev/mycelium/my-exploration/projects/aastar-sdk
> vitest run --coverage


[1m[46m RUN [49m[22m [36mv4.0.17 [39m[90m/Users/jason/Dev/mycelium/my-exploration/projects/aastar-sdk[39m
      [2mCoverage enabled with [22m[33mv8[39m

 [32mâœ“[39m packages/core/__tests__/clients.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 13[2mms[22m[39m
[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould skip funding if already sufficient
[22m[39m
ğŸš° SepoliaFaucetAPI: Preparing 0x1111111111111111111111111111111111111111...

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould skip funding if already sufficient
[22m[39m   âœ… ETH Balance adequate (1 ETH).

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould skip funding if already sufficient
[22m[39m   âœ… ENDUSER Role already held.

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould skip funding if already sufficient
[22m[39m   âœ… Token Balance adequate.

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould skip funding if already sufficient
[22m[39mâœ… Preparation Complete! {
  ethFunded: [33mfalse[39m,
  roleRegistered: [33mfalse[39m,
  tokenMinted: [33mfalse[39m,
  paymasterDeposited: [33mfalse[39m
}

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould fund ETH if balance low
[22m[39m
ğŸš° SepoliaFaucetAPI: Preparing 0x1111111111111111111111111111111111111111...

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould fund ETH if balance low
[22m[39m   ğŸ’° Funding ETH... (Before: 0)

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould fund ETH if balance low
[22m[39m      -> Sent 0.1 ETH. Tx: 0xHash

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould fund ETH if balance low
[22m[39m   ğŸ‘¤ Registering ENDUSER role (Sponsor Mode)...

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould fund ETH if balance low
[22m[39m   âœ… Token Balance adequate.

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould fund ETH if balance low
[22m[39mâœ… Preparation Complete! {
  ethFunded: [33mtrue[39m,
  roleRegistered: [33mfalse[39m,
  tokenMinted: [33mfalse[39m,
  paymasterDeposited: [33mfalse[39m
}

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould mint tokens if balance low
[22m[39m
ğŸš° SepoliaFaucetAPI: Preparing 0x1111111111111111111111111111111111111111...

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould mint tokens if balance low
[22m[39m   âœ… ETH Balance adequate (1 ETH).

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould mint tokens if balance low
[22m[39m   ğŸ‘¤ Registering ENDUSER role (Sponsor Mode)...

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould mint tokens if balance low
[22m[39m   ğŸª™ Minting Tokens... (Current: 0)

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould mint tokens if balance low
[22m[39m      -> Minted 1000. Tx: 0xHash

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould mint tokens if balance low
[22m[39mâœ… Preparation Complete! {
  ethFunded: [33mfalse[39m,
  roleRegistered: [33mfalse[39m,
  tokenMinted: [33mtrue[39m,
  paymasterDeposited: [33mfalse[39m
}

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould deposit to paymaster if configured
[22m[39m
ğŸš° SepoliaFaucetAPI: Preparing 0x1111111111111111111111111111111111111111...

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould deposit to paymaster if configured
[22m[39m   âœ… ETH Balance adequate (1 ETH).

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould deposit to paymaster if configured
[22m[39m   ğŸ‘¤ Registering ENDUSER role (Sponsor Mode)...

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould deposit to paymaster if configured
[22m[39m   âœ… Token Balance adequate.

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould deposit to paymaster if configured
[22m[39m   ğŸ¦ Depositing FOR User...

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould deposit to paymaster if configured
[22m[39m      -> Deposited 10 to PM. Tx: 0xHash

[90mstdout[2m | packages/core/__tests__/actions/faucet.test.ts[2m > [22m[2mSepoliaFaucetAPI[2m > [22m[2mshould deposit to paymaster if configured
[22m[39mâœ… Preparation Complete! {
  ethFunded: [33mfalse[39m,
  roleRegistered: [33mfalse[39m,
  tokenMinted: [33mfalse[39m,
  paymasterDeposited: [33mtrue[39m
}

 [32mâœ“[39m packages/core/__tests__/actions/faucet.test.ts [2m([22m[2m6 tests[22m[2m | [22m[33m1 skipped[39m[2m)[22m[32m 215[2mms[22m[39m
 [32mâœ“[39m packages/core/__tests__/actions/comprehensive-batch2.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 106[2mms[22m[39m
 [32mâœ“[39m packages/core/__tests__/actions/staking.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 58[2mms[22m[39m
 [32mâœ“[39m packages/core/__tests__/actions/edge-cases.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 132[2mms[22m[39m
 [32mâœ“[39m packages/core/__tests__/actions/error-paths.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 136[2mms[22m[39m
 [32mâœ“[39m packages/core/__tests__/actions/registry.test.ts [2m([22m[2m48 tests[22m[2m)[22m[32m 231[2mms[22m[39m
 [32mâœ“[39m packages/core/__tests__/actions/comprehensive-batch1.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32mâœ“[39m packages/core/__tests__/actions/factory.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 76[2mms[22m[39m
 [32mâœ“[39m packages/core/__tests__/actions/tokens.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 154[2mms[22m[39m
 [32mâœ“[39m packages/core/__tests__/contracts-config.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 203[2mms[22m[39m
 [32mâœ“[39m packages/core/__tests__/actions/comprehensive-batch3.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 144[2mms[22m[39m
[90mstdout[2m | packages/operator/__tests__/PaymasterOperatorClient.test.ts[2m > [22m[2mPaymasterOperatorClient[2m > [22m[2mDeployment[2m > [22m[2mdeployAndRegisterPaymasterV4 should deploy and register
[22m[39m    ğŸ› ï¸ Deploying Paymaster V4 with args: {
  entryPoint: [32m'0x0000000071727De22E5E9d8BAf0edAc6f37da032'[39m,
  owner: [32m'0x1234567890123456789012345678901234567890'[39m,
  priceFeed: [32m'0x694AA1769357215DE4FAC081bf1f309aDC325306'[39m,
  factory: [32m'0x6666666666666666666666666666666666666666'[39m
}

[90mstdout[2m | packages/operator/__tests__/PaymasterOperatorClient.test.ts[2m > [22m[2mPaymasterOperatorClient[2m > [22m[2mDeployment[2m > [22m[2mdeployAndRegisterPaymasterV4 should skip register if already has role
[22m[39m    â„¹ï¸  Paymaster already deployed at: 0x7777777777777777777777777777777777777777

 [32mâœ“[39m packages/operator/__tests__/PaymasterOperatorClient.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 267[2mms[22m[39m
 [32mâœ“[39m packages/core/__tests__/actions/paymaster.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 89[2mms[22m[39m
 [32mâœ“[39m packages/core/__tests__/actions/tokens-extended.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 83[2mms[22m[39m
 [32mâœ“[39m packages/core/__tests__/actions/sbt.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 32[2mms[22m[39m
 [32mâœ“[39m packages/core/__tests__/actions/reputation.test.ts [2m([22m[2m19 tests[22m[2m)[22m[32m 117[2mms[22m[39m
 [32mâœ“[39m packages/core/__tests__/actions/aggregator.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 48[2mms[22m[39m
 [32mâœ“[39m packages/core/__tests__/actions/superPaymaster.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 108[2mms[22m[39m
 [32mâœ“[39m packages/core/__tests__/actions/dvt.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 32[2mms[22m[39m
 [32mâœ“[39m packages/core/__tests__/index.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32mâœ“[39m packages/analytics/__tests__/index.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32mâœ“[39m packages/community/__tests__/index.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32mâœ“[39m packages/account/__tests__/index.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32mâœ“[39m packages/enduser/__tests__/CommunityClient.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 84[2mms[22m[39m
 [32mâœ“[39m packages/dapp/__tests__/index.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 40[2mms[22m[39m
 [32mâœ“[39m packages/enduser/__tests__/UserClient.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 153[2mms[22m[39m
 [32mâœ“[39m packages/core/__tests__/actions/account-comprehensive.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 30[2mms[22m[39m
 [32mâœ“[39m packages/operator/__tests__/ProtocolClient.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 33[2mms[22m[39m
 [32mâœ“[39m packages/enduser/__tests__/index.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32mâœ“[39m packages/operator/__tests__/index.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 7[2mms[22m[39m
 [32mâœ“[39m packages/identity/__tests__/index.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32mâœ“[39m packages/patterns/__tests__/index.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 6[2mms[22m[39m
 [32mâœ“[39m packages/paymaster/__tests__/index.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32mâœ“[39m packages/sdk/__tests__/index.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 6[2mms[22m[39m
 [32mâœ“[39m packages/tokens/__tests__/index.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 4[2mms[22m[39m

[2m Test Files [22m [1m[32m36 passed[39m[22m[90m (36)[39m
[2m      Tests [22m [1m[32m246 passed[39m[22m[2m | [22m[33m1 skipped[39m[90m (247)[39m
[2m   Start at [22m 10:43:02
[2m   Duration [22m 21.77s[2m (transform 4.65s, setup 0ms, import 99.68s, tests 2.67s, environment 88ms)[22m

[34m % [39m[2mCoverage report from [22m[33mv8[39m
-------------------|---------|----------|---------|---------|-------------------
File               | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
-------------------|---------|----------|---------|---------|-------------------
All files          |   44.69 |    25.69 |   62.78 |   44.81 |                   
 account/src       |   16.66 |        0 |       0 |   16.66 |                   
  eoa.ts           |   16.66 |        0 |       0 |   16.66 | 14-29             
 ...t/src/accounts |       0 |        0 |       0 |       0 |                   
  simple.ts        |       0 |        0 |       0 |       0 | 30-80             
 core/src          |   45.12 |    18.33 |    4.65 |    45.5 |                   
  branding.ts      |     100 |      100 |     100 |     100 |                   
  clients.ts       |       0 |        0 |       0 |       0 | 9                 
  communities.ts   |      75 |      100 |      25 |   72.72 | 78-92             
  constants.ts     |    97.5 |      100 |     100 |    97.5 | 10                
  ...-addresses.ts |     100 |    83.33 |     100 |     100 | 87                
  ...t-versions.ts |       8 |      100 |       0 |    9.09 | 265-358           
  contracts.ts     |    9.67 |        0 |       0 |      10 | 131-326,377-413   
  networks.ts      |   14.28 |      100 |       0 |   14.28 | 45-126            
  ...entChecker.ts |    6.52 |        0 |       0 |    6.52 | 44-218            
  roles.ts         |      95 |       50 |      50 |   94.73 | 143               
  utils.ts         |       0 |      100 |       0 |       0 | 17                
 core/src/actions  |   61.31 |    67.58 |   79.91 |   60.74 |                   
  ...eValidator.ts |       0 |        0 |   85.71 |       0 | 49-246            
  account.ts       |   82.69 |      100 |     100 |   80.85 | ...40,153,172,187 
  aggregator.ts    |   25.27 |      100 |   30.43 |   23.59 | ...21-134,155-368 
  dvt.ts           |   28.81 |      100 |    37.5 |   26.31 | ...16,131,147-248 
  entryPoint.ts    |    42.3 |      100 |   57.14 |   34.78 | 22-64,86          
  factory.ts       |   45.34 |       50 |   59.25 |    44.7 | ...18,532,541-727 
  faucet.ts        |   84.31 |    83.33 |     100 |   84.31 | ...58-265,274-275 
  paymaster.ts     |   70.81 |      100 |   97.91 |   70.49 | ...38,751,764,777 
  registry.ts      |   71.67 |       25 |   96.55 |   71.42 | ...00,930,945,958 
  reputation.ts    |   35.42 |       10 |   56.75 |   34.68 | ...93,607-652,665 
  sbt.ts           |   75.67 |       50 |     100 |   75.45 | ...68,882,898,913 
  staking.ts       |   37.76 |       50 |   39.39 |   36.87 | ...12-457,470-573 
  ...rPaymaster.ts |   71.42 |       50 |   96.87 |    71.2 | ...1062,1077,1090 
  tokens.ts        |      82 |    92.04 |   92.53 |   81.78 | ...12,436,451,458 
 core/src/clients  |     100 |      100 |     100 |     100 |                   
  BaseClient.ts    |     100 |      100 |     100 |     100 |                   
  types.ts         |       0 |        0 |       0 |       0 |                   
 core/src/config   |     100 |      100 |     100 |     100 |                   
  ...figManager.ts |     100 |      100 |     100 |     100 |                   
 core/src/crypto   |    4.34 |      100 |      25 |    4.76 |                   
  blsSigner.ts     |    4.34 |      100 |      25 |    4.76 | 13-69,81-119      
 dapp/src/ui/hooks |       0 |        0 |       0 |       0 |                   
  ...reditScore.ts |       0 |        0 |       0 |       0 | 15-43             
  ...rPaymaster.ts |       0 |      100 |       0 |       0 | 12-30             
 enduser/src       |   55.59 |    44.21 |      65 |   58.57 |                   
  ...nityClient.ts |   96.07 |      100 |     100 |   95.83 | 143,232           
  UserClient.ts    |   79.83 |    58.82 |     100 |   86.23 | ...59,276,353,443 
  ...untManager.ts |       0 |        0 |       0 |       0 | 36-325            
 identity/src      |       0 |      100 |       0 |       0 |                   
  mysbt.ts         |       0 |      100 |       0 |       0 | 13-46             
 operator/src      |   77.52 |    77.58 |   77.27 |    77.4 |                   
  ...atorClient.ts |   73.68 |    75.51 |   64.28 |   73.68 | ...12,429,438,457 
  ...ocolClient.ts |   88.88 |    88.88 |     100 |   88.63 | 58,75,97,130,140  
 patterns/src      |       0 |        0 |    5.76 |       0 |                   
  ...yLaunchpad.ts |       0 |        0 |       0 |       0 | 34-102            
  GaslessHelper.ts |       0 |        0 |     100 |       0 | 32-61             
  ...rLifecycle.ts |       0 |        0 |       0 |       0 | 30-116            
  ...Governance.ts |       0 |      100 |       0 |       0 | 21-86             
  ...ionManager.ts |       0 |        0 |       0 |       0 | 22-162            
  ...ingManager.ts |       0 |        0 |       0 |       0 | 28-98             
  ...erOperator.ts |       0 |      100 |       0 |       0 | 22-126            
  UserLifecycle.ts |       0 |        0 |       0 |       0 | 27-142            
 paymaster/src/V4  |       1 |        0 |   69.44 |    1.05 |                   
  ...sterClient.ts |       0 |        0 |   81.81 |       0 | 14-418            
  ...erOperator.ts |       0 |        0 |   93.75 |       0 | 15-280            
  ...asterUtils.ts |    4.87 |        0 |       0 |    4.87 | 32-169            
  ...sterClient.ts |       0 |      100 |     100 |       0 | 35-95             
 sdk/src/clients   |    0.33 |        0 |       0 |    0.34 |                   
  ...mentClient.ts |       0 |        0 |       0 |       0 | 20-78             
  admin.ts         |      20 |        0 |       0 |      20 | 38-55             
  community.ts     |       0 |        0 |       0 |       0 | 69-399            
  endUser.ts       |       0 |        0 |       0 |       0 | 89-425            
  operator.ts      |       0 |        0 |       0 |       0 | 67-279            
 sdk/src/errors    |    4.54 |        0 |       0 |       5 |                   
  decoder.ts       |    4.54 |        0 |       0 |       5 | 11-47             
 sdk/src/utils     |    3.29 |     1.16 |   48.07 |    3.08 |                   
  errorHandler.ts  |       0 |        0 |       0 |       0 | 36-163            
  funding.ts       |       0 |        0 |     100 |       0 | 74-278            
  keys.ts          |       0 |        0 |      50 |       0 | 25-157            
  roleData.ts      |   11.11 |        0 |       0 |   11.11 | 20-142            
  testScenarios.ts |   21.87 |     9.52 |     100 |   21.42 | 45-126            
  userOp.ts        |       0 |        0 |   77.77 |       0 | 36-270            
-------------------|---------|----------|---------|---------|-------------------
