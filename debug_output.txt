(node:15182) [MODULE_TYPELESS_PACKAGE_JSON] Warning: Module type of file:///Users/jason/Dev/mycelium/my-exploration/projects/aastar-sdk/scripts/12_test_staking_slash.ts is not specified and it doesn't parse as CommonJS.
Reparsing as ES module because module syntax was detected. This incurs a performance overhead.
To eliminate this warning, add "type": "module" to /Users/jason/Dev/mycelium/my-exploration/projects/aastar-sdk/package.json.
(Use `node --trace-warnings ...` to show where the warning was created)
[dotenv@17.2.3] injecting env (4) from ../SuperPaymaster/contracts/.env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }

üõ°Ô∏è Starting Phase 5: Staking & Slash Test üõ°Ô∏è

üë§ Dave (Test User): 0xd7ef2A575a81ee12ee263ee12BF976ffA4b5b5C3
   üí∞ Minting 500 GToken to Dave...
   üîó Linking to Community: 0x2546BcD3c84621e976D8185a91A922aE77ECEc30

   üîç Performing Pre-flight Checks:
      Registry.GTOKEN_STAKING: 0xC9a43158891282A2B1475592D5719c001986Aaec
      Script STAKING_ADDR:     0xc9a43158891282a2b1475592d5719c001986aaec
      ‚úÖ Staking Address matched.
      Community (0x2546BcD3c84621e976D8185a91A922aE77ECEc30) has ROLE_COMMUNITY: true
      Config: MinStake=100, EntryBurn=0
      Tx Plan: Lock=500, Burn=0 => Total=500
      Current Allowance: 500
      ‚úÖ Allowance sufficient.

   ü©∫ GToken Diagnostics:
      Test 1: Direct Transfer (1 wei)...
      ‚úÖ Direct Transfer OK.
      Test 2: TransferFrom (1 wei)...
      ‚úÖ TransferFrom OK.
   üìù Registering Dave...
ContractFunctionExecutionError: The contract function "registerRoleSelf" reverted.

Contract Call:
  address:   0x1c85638e118b37167e9298c2268758e058ddfda0
  function:  registerRoleSelf(bytes32 roleId, bytes roleData)
  args:                      (0x0c34ecc75d3bf122e0609d2576e167f53fb42429262ce8c9b33cab91ff670e3a, 0x000000000000000000000000d7ef2a575a81ee12ee263ee12bf976ffa4b5b5c30000000000000000000000002546bcd3c84621e976d8185a91a922ae77ecec3000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001f4000000000000000000000000000000000000000000000000000000000000000b697066733a2f2f646176650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006646176652e630000000000000000000000000000000000000000000000000000)
  sender:    0xd7ef2A575a81ee12ee263ee12BF976ffA4b5b5C3

Docs: https://viem.sh/docs/contract/writeContract
Version: viem@2.41.2
    at getContractError (file:///Users/jason/Dev/mycelium/my-exploration/projects/aastar-sdk/node_modules/.pnpm/viem@2.41.2_typescript@5.9.3/node_modules/viem/utils/errors/getContractError.ts:81:10)
    at writeContract.internal (file:///Users/jason/Dev/mycelium/my-exploration/projects/aastar-sdk/node_modules/.pnpm/viem@2.41.2_typescript@5.9.3/node_modules/viem/actions/wallet/writeContract.ts:242:13)
    at processTicksAndRejections (node:internal/process/task_queues:103:5)
    at async main (file:///Users/jason/Dev/mycelium/my-exploration/projects/aastar-sdk/scripts/12_test_staking_slash.ts:246:11) {
  cause: ContractFunctionRevertedError: The contract function "registerRoleSelf" reverted.
  
  Version: viem@2.41.2
      at file:///Users/jason/Dev/mycelium/my-exploration/projects/aastar-sdk/node_modules/.pnpm/viem@2.41.2_typescript@5.9.3/node_modules/viem/utils/errors/getContractError.ts:68:14
      at getContractError (file:///Users/jason/Dev/mycelium/my-exploration/projects/aastar-sdk/node_modules/.pnpm/viem@2.41.2_typescript@5.9.3/node_modules/viem/utils/errors/getContractError.ts:79:5)
      at writeContract.internal (file:///Users/jason/Dev/mycelium/my-exploration/projects/aastar-sdk/node_modules/.pnpm/viem@2.41.2_typescript@5.9.3/node_modules/viem/actions/wallet/writeContract.ts:242:13)
      at processTicksAndRejections (node:internal/process/task_queues:103:5)
      at async main (file:///Users/jason/Dev/mycelium/my-exploration/projects/aastar-sdk/scripts/12_test_staking_slash.ts:246:11) {
    details: undefined,
    docsPath: undefined,
    metaMessages: undefined,
    shortMessage: 'The contract function "registerRoleSelf" reverted.',
    version: '2.41.2',
    data: undefined,
    raw: '0x',
    reason: 'execution reverted',
    signature: undefined
  },
  details: undefined,
  docsPath: '/docs/contract/writeContract',
  metaMessages: [
    'Contract Call:',
    '  address:   0x1c85638e118b37167e9298c2268758e058ddfda0\n' +
      '  function:  registerRoleSelf(bytes32 roleId, bytes roleData)\n' +
      '  args:                      (0x0c34ecc75d3bf122e0609d2576e167f53fb42429262ce8c9b33cab91ff670e3a, 0x000000000000000000000000d7ef2a575a81ee12ee263ee12bf976ffa4b5b5c30000000000000000000000002546bcd3c84621e976d8185a91a922ae77ecec3000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001f4000000000000000000000000000000000000000000000000000000000000000b697066733a2f2f646176650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006646176652e630000000000000000000000000000000000000000000000000000)\n' +
      '  sender:    0xd7ef2A575a81ee12ee263ee12BF976ffA4b5b5C3'
  ],
  shortMessage: 'The contract function "registerRoleSelf" reverted.',
  version: '2.41.2',
  abi: [
    {
      type: 'constructor',
      inputs: [Array],
      stateMutability: 'nonpayable'
    },
    {
      type: 'function',
      name: 'GTOKEN_STAKING',
      inputs: [],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'MYSBT',
      inputs: [],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'ROLE_COMMUNITY',
      inputs: [],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'ROLE_ENDUSER',
      inputs: [],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'ROLE_KMS',
      inputs: [],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'ROLE_PAYMASTER_AOA',
      inputs: [],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'ROLE_PAYMASTER_SUPER',
      inputs: [],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'VERSION',
      inputs: [],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'VERSION_CODE',
      inputs: [],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'accountToUser',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'batchUpdateGlobalReputation',
      inputs: [Array],
      outputs: [],
      stateMutability: 'nonpayable'
    },
    {
      type: 'function',
      name: 'burnHistory',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'calculateExitFee',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'pure'
    },
    {
      type: 'function',
      name: 'checkRole',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'communityByENSV3',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'communityByNameV3',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'configureRole',
      inputs: [Array],
      outputs: [],
      stateMutability: 'nonpayable'
    },
    {
      type: 'function',
      name: 'creditTierConfig',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'exitRole',
      inputs: [Array],
      outputs: [],
      stateMutability: 'nonpayable'
    },
    {
      type: 'function',
      name: 'getBurnHistory',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'getCreditLimit',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'getRoleConfig',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'getRoleUserCount',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'getUserRoles',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'globalReputation',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'hasRole',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'isReputationSource',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'lastReputationEpoch',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'owner',
      inputs: [],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'proposedRoleNames',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'registerRole',
      inputs: [Array],
      outputs: [],
      stateMutability: 'nonpayable'
    },
    {
      type: 'function',
      name: 'registerRoleSelf',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'nonpayable'
    },
    {
      type: 'function',
      name: 'renounceOwnership',
      inputs: [],
      outputs: [],
      stateMutability: 'nonpayable'
    },
    {
      type: 'function',
      name: 'roleConfigs',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'roleMembers',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'roleMetadata',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'roleOwners',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'roleSBTTokenIds',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'roleStakes',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'function',
      name: 'safeMintForRole',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'nonpayable'
    },
    {
      type: 'function',
      name: 'setCreditTier',
      inputs: [Array],
      outputs: [],
      stateMutability: 'nonpayable'
    },
    {
      type: 'function',
      name: 'setReputationSource',
      inputs: [Array],
      outputs: [],
      stateMutability: 'nonpayable'
    },
    {
      type: 'function',
      name: 'transferOwnership',
      inputs: [Array],
      outputs: [],
      stateMutability: 'nonpayable'
    },
    {
      type: 'function',
      name: 'userBurnHistory',
      inputs: [Array],
      outputs: [Array],
      stateMutability: 'view'
    },
    {
      type: 'event',
      name: 'BurnExecuted',
      inputs: [Array],
      anonymous: false
    },
    {
      type: 'event',
      name: 'CreditTierUpdated',
      inputs: [Array],
      anonymous: false
    },
    {
      type: 'event',
      name: 'GlobalReputationUpdated',
      inputs: [Array],
      anonymous: false
    },
    {
      type: 'event',
      name: 'OwnershipTransferred',
      inputs: [Array],
      anonymous: false
    },
    {
      type: 'event',
      name: 'ReputationSourceUpdated',
      inputs: [Array],
      anonymous: false
    },
    {
      type: 'event',
      name: 'RoleConfigured',
      inputs: [Array],
      anonymous: false
    },
    {
      type: 'event',
      name: 'RoleExited',
      inputs: [Array],
      anonymous: false
    },
    {
      type: 'event',
      name: 'RoleRegistered',
      inputs: [Array],
      anonymous: false
    },
    { type: 'error', name: 'InsufficientStake', inputs: [Array] },
    { type: 'error', name: 'InvalidParameter', inputs: [Array] },
    { type: 'error', name: 'OwnableInvalidOwner', inputs: [Array] },
    {
      type: 'error',
      name: 'OwnableUnauthorizedAccount',
      inputs: [Array]
    },
    { type: 'error', name: 'ReentrancyGuardReentrantCall', inputs: [] },
    { type: 'error', name: 'RoleAlreadyGranted', inputs: [Array] },
    { type: 'error', name: 'RoleNotConfigured', inputs: [Array] },
    { type: 'error', name: 'RoleNotGranted', inputs: [Array] }
  ],
  args: [
    '0x0c34ecc75d3bf122e0609d2576e167f53fb42429262ce8c9b33cab91ff670e3a',
    '0x000000000000000000000000d7ef2a575a81ee12ee263ee12bf976ffa4b5b5c30000000000000000000000002546bcd3c84621e976d8185a91a922ae77ecec3000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e000000000000000000000000000000000000000000000000000000000000001f4000000000000000000000000000000000000000000000000000000000000000b697066733a2f2f646176650000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006646176652e630000000000000000000000000000000000000000000000000000'
  ],
  contractAddress: '0x1c85638e118b37167e9298c2268758e058ddfda0',
  formattedArgs: undefined,
  functionName: 'registerRoleSelf',
  sender: '0xd7ef2A575a81ee12ee263ee12BF976ffA4b5b5C3'
}
