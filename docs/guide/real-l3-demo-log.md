jason@HuifengjiaodeMacBook-Pro-3: ~/Dev/mycelium/my-exploration/projects/aastar-sdk l3-refine
$ npx tsx examples/l3-complete-demo.ts --network seoplia                                                                                                            [8:48:34]
npm warn Unknown project config "pnpm-lock.yaml". This will stop working in the next major version of npm.
npm warn Unknown project config "frozen-lockfile". This will stop working in the next major version of npm.
npm warn Unknown project config "auto-install-peers". This will stop working in the next major version of npm.
npm warn Unknown project config "strict-peer-dependencies". This will stop working in the next major version of npm.
ğŸ” DATA SOURCE: tests/regression/config.ts (TS Source)
ğŸš€ Starting L3 Complete Lifecycle Demo (Real Transactions)...
ğŸ“„ Loading config from: /Users/jason/Dev/mycelium/my-exploration/projects/aastar-sdk/.env.sepolia
[dotenv@17.2.3] injecting env (31) from .env.sepolia -- tip: âš™ï¸  override existing env vars with { override: true }
    ğŸ” DEBUG: PRIVATE_KEY_SUPPLIER present? true
    ğŸ” DEBUG: Supplier Key Length: 66
âœ… Loaded contract addresses from: /Users/jason/Dev/mycelium/my-exploration/projects/aastar-sdk/config.sepolia.json
   Keys found: aPNTs, blsAggregator, blsValidator, dvtValidator, entryPoint, gToken, paymasterFactory, paymasterV4Impl, priceFeed, registry, reputationSystem, sbt, simpleAccountFactory, srcHash, staking, superPaymaster, updateTime, xPNTsFactory
    âœ… Found Third-Party in ENV: entryPoint -> 0x0000000071727De22E5E9d8BAf0edAc6f37da032
    âœ… Found Third-Party in ENV: priceFeed -> 0x694AA1769357215DE4FAC081bf1f309aDC325306
    âœ… Found Third-Party in ENV: simpleAccountFactory -> 0x91E60e0613810449d098b0b5Ec8b51A0FE8c8985
[dotenv@17.2.3] injecting env (31) from .env.sepolia -- tip: ğŸ‘¥ sync secrets across teammates & machines: https://dotenvx.com/ops
ğŸ“¡ Network: sepolia
â›½ Supplier: 0xb5600060e6de5E11D3636731964218E53caadf0E
ğŸ­ Registry: 0x7Ba70C5bFDb3A4d0cBd220534f3BE177fefc1788

ğŸ”¹ Step 1: Creating New Operator (Alice)...
   ğŸ‘¤ Alice (Operator): 0xa4A3C92cdb59303BdfB14c7859523508ee1d9058
   ğŸ’¸ Sending 0.1 ETH to Alice...
      â³ Waiting for Fund Alice ETH (0x904a3222b3fe938af010cf125b2c13cfca39a5c41ec906a80e7f87dc0124e222)...
      âœ… Fund Alice ETH Confirmed in block 10138297
   ğŸª™ Minting 100 GTokens to Alice...
      â³ Waiting for Mint GToken (0x6af3278325a4488b004dd219c377a60b33b47db63f07852e5f071125bd857e7c)...
      âœ… Mint GToken Confirmed in block 10138298
   ğŸª™ Minting 4,000 aPNTs to Alice...
      â³ Waiting for Mint aPNTs (0x406be5561ebc76456c34bd1c5caa59a63e0dc5c88f8aee5a9310a0f67ab00e21)...
      âœ… Mint aPNTs Confirmed in block 10138300
   ğŸ“Š Status Before: Configured=false, Balance=0

ğŸ”¹ Step 2: Alice Launching Community (One-Click Setup)...
   ğŸ”„ Attempt 1/3 to launch community...
   âœ… Community Launched! Hashes: 0xd50372bcda95d39927f0bbc9c99f2c19a4b660f18e971587690f115019b01e18, 0x6898dc6858f163ba1f7cdcf54eb8f2a37c28929ee6730859a10fc1500692ecbf
      â³ Waiting for Community Launch (0xd50372bcda95d39927f0bbc9c99f2c19a4b660f18e971587690f115019b01e18)...
      âœ… Community Launch Confirmed in block 10138302
      â³ Waiting for Community Launch (0x6898dc6858f163ba1f7cdcf54eb8f2a37c28929ee6730859a10fc1500692ecbf)...
      âœ… Community Launch Confirmed in block 10138304
   ğŸ”— Linking Token to SuperPaymaster...
      â³ Waiting for Link Token to SuperPM (0xdd4c4d21b49543d91014bc22edc8cd90551dc8b41b4567b4f26630c2cc09d5ad)...
      âœ… Link Token to SuperPM Confirmed in block 10138305

ğŸ”¹ Step 3: Alice Onboarding as SuperPaymaster Operator...
   âš™ï¸  Setting up Node (Deposit + Register)...
      â³ Waiting for Setup Node (Register) (0xa41aa8e4cc0f185cf20dac918fb9a3cd4c52c24591ff43f7cc25c01fe1d02070)...
      âœ… Setup Node (Register) Confirmed in block 10138307
      â³ Waiting for Setup Node (Register) (0xba97284360744a7769c88b67bf64196126481d539ba5d8ae83b40980d3ce11a8)...
      âœ… Setup Node (Register) Confirmed in block 10138308
   â³ Waiting for SuperPM Role to index...
   âœ… Role Verified on-chain.
   ğŸ’° Depositing Collateral (4000 aPNTs)...
      â³ Waiting for Deposit Collateral (0x84998727523d94d01de449b733547e3a78c7f5408c5c41cd8e0e1139190a3d35)...
      âœ… Deposit Collateral Confirmed in block 10138309
   âš™ï¸  Forcing Operator Configuration...
      â³ Waiting for Configure Operator (0x1057d5ac3eeb4a14ca764042bb54158923e1366ddb63513072439b6ff9e84ee1)...
      âœ… Configure Operator Confirmed in block 10138310
   ğŸ”„ Refreshing Oracle Price (DVT)...
      â³ Waiting for Update Price DVT (0x2e8e743965be0d848fad8a8d96617366f0e104ca3de63139b259561fbb91cec6)...
      âœ… Update Price DVT Confirmed in block 10138311
   âœ… Price Updated via DVT!
   ğŸ“Š Status After: Configured=true

ğŸ”¹ Step 3: Creating New User (Bob)...
   ğŸ‘¤ Bob (EOA): 0x65a64728223eDF09B89E2194F0F8d327325D6879
   ğŸ¤– Bob (AA): 0xE4b09B969b91800D15a8e2f8F3B4b8a9C2B8D27c
   ğŸ’¸ Funding Bob's EOA for gas...
      â³ Waiting for Fund Bob EOA (0xd44953372188391fe76ef48899ea06aa3ad4493c631040ebb94f215027d94207)...
      âœ… Fund Bob EOA Confirmed in block 10138312
   ğŸš€ Deploying Bob's AA Account...
      â³ Waiting for Deploy Bob AA (0xb5d66d6d9c0ebd4595cebb3aadfba8381e68864fdb0daeab77ae1c1083395238)...
      âœ… Deploy Bob AA Confirmed in block 10138313
   ğŸ’¸ Funding Bob's AA with 0.1 ETH + 20 GTokens...
      â³ Waiting for Fund Bob AA ETH (0x5c6a4060b57c8f9b7413d0b3542ddbd7c82169ef043ed168505db43c7aff80c6)...
      âœ… Fund Bob AA ETH Confirmed in block 10138314
      â³ Waiting for Fund Bob AA GToken (0xe5ad35a284c74122519db1966ab0e2c25b655d740894958722d51ea9056a2979)...
      âœ… Fund Bob AA GToken Confirmed in block 10138315

ğŸ”¹ Step 5: Bob Onboarding to Alice's Community...
   ğŸ”¸ Alice Community Role: true
   ğŸ”¸ Bob's AA GToken Balance: 20
   ğŸ§ Eligible: true
   ğŸ“ Bob calling onboard()...
   ğŸ” Debug Allowance: Account=0xE4b09B969b91800D15a8e2f8F3B4b8a9C2B8D27c, Allowance=0, Needed=400000000000000000
   ğŸ” Debug Onboard: Community=0xa4A3C92cdb59303BdfB14c7859523508ee1d9058, AA=0xE4b09B969b91800D15a8e2f8F3B4b8a9C2B8D27c, Stake=400000000000000000
   ğŸ” Debug Batch: Txs=2, Targets=0x9ceDeC089921652D050819ca5BE53765fc05aa9E,0x7Ba70C5bFDb3A4d0cBd220534f3BE177fefc1788
   âœ… Onboard Result: Success=true, Tx=0x252475ba662d0c67a05c159d50641d3839689a2beef13ffc03f5a5990e6dfd66
      â³ Waiting for Onboard (0x252475ba662d0c67a05c159d50641d3839689a2beef13ffc03f5a5990e6dfd66)...
      âœ… Onboard Confirmed in block 10138318

ğŸ”¹ Step 6: Bob Executing Gasless Transaction...
[SuperPaymasterClient] ğŸ¯ Target Info:
   - Paymaster: 0x16cE0c7d846f9446bbBeb9C5a84A4D140fAeD94A
   - Token: 0x9ceDeC089921652D050819ca5BE53765fc05aa9E
   - Operator: 0xa4A3C92cdb59303BdfB14c7859523508ee1d9058
[SuperPaymasterClient] â˜ï¸  Estimating Gas usage...
[PaymasterClient] Gas Estimation Result: {
  "preVerificationGas": "0x186a0",
  "callGasLimit": "0x7a120",
  "verificationGasLimit": "0x3d090",
  "paymasterVerificationGasLimit": "0x493e0"
}
[SuperPaymasterClient] â˜ï¸  Bundler Estimates: {
  preVerificationGas: 100000n,
  verificationGasLimit: 250000n,
  callGasLimit: 550000n,
  paymasterVerificationGasLimit: 300000n,
  paymasterPostOpGasLimit: 100000n
}
[SuperPaymasterClient] ğŸ”§ Tuned Limits: VGL=330000, PMVGL=133333, PostOp=110000
[PaymasterClient] Priority Fee 2158783 too low, clamping to 0.5 Gwei
[PaymasterClient] Fees Set: MaxFee=1836352542, Priority=500000000
[PaymasterClient] Using alchemy Bundler
[PaymasterClient] âœ… Submitted via alchemy hash: 0xc5a09bc6d916dc145e21165d3a39de2d62f57e4116a6e4897055483a49cc63b9
   âœ… UserOp Hash: 0xc5a09bc6d916dc145e21165d3a39de2d62f57e4116a6e4897055483a49cc63b9
   âœ… Gasless Tx Success! Tx Hash: 0x101861483a4e50f8a7e6d73a925f24548a2440a8b4325578c17eb3f69d01e5d6

ğŸ”¹ Step 7: Exit Phase...
   ğŸšª Bob leaving community...
      â³ Waiting for Bob Leave Community (0xfce80ce0463787a72eda06cadbd4621d1e5e32da40e8605d898e72fc5cc42939)...
      âœ… Bob Leave Community Confirmed in block 10138320
   âœ… Bob Left (SBT Burned): 0xfce80ce0463787a72eda06cadbd4621d1e5e32da40e8605d898e72fc5cc42939
   ğŸ¦ Alice withdrawing funds & exiting role...
   âš ï¸ Withdrawal/Exit Failed (Expected if Locked): Unauthorized to perform this action
   â„¹ï¸ Note: Registry roles typically have a lock period (e.g. 30 days) before exit is final.

ğŸ‰ L3 Demo Complete!
(base)  
